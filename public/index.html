<!DOCTYPE html>
<html lang="en" dir="ltr" ng-app="myApp">

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="stylesheets/style.css" media="screen" />

<script src='https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js'></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.6.1/angular-animate.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.6.1/angular-sanitize.js"></script>
<script src="./angular/crud.controller.js"></script>
<script src="./angular/modal.controller.js"></script>
<script src='/script/bootstrap/ui-bootstrap-tpls.js'></script>
<script src="/script/file-upload/ng-file-upload.min.js"></script>
<script src="/script/file-upload/ng-file-upload-shim.min.js"></script>

<head>
  <meta charset="utf-8">
  <title>Vin Decoder</title>
  <div class="header">
    <label>Vin Decoder</label>
  </div>
</head>

<body>
  <div ng-controller="crudController">
    <div >
      <div class="column">
        <label>Insert Vehicle</label>
        <form ng-submit="insertVehicle()">
          <div ng-class="{'has-error' : !insertedYear}">
            <label>year</label>
            <input type="number" ng-model="insertedYear" class="form-control input-sm"
             uib-tooltip="must enter something into this field"
             tooltip-placement="top"
             tooltip-trigger="'mouseenter'"
             tooltip-enable="!insertedYear">
          </div>
          <div ng-class="{'has-error' : !insertedMake}">
            <label>make</label>
            <input type="text" ng-model="insertedMake" class="form-control input-sm"
             uib-tooltip="must enter something into this field"
             tooltip-placement="top"
             tooltip-trigger="'mouseenter'"
             tooltip-enable="!insertedMake">
          </div>
          <div>
            <label>harnessType</label>
            <input type="number" ng-model="insertedHarnessType" class="form-control input-sm">
          </div>
          <div>
            <br>
            <button type="submit" class="btn btn-primary">Submit</button>
          </div>
          <br>
          <div uib-alert dismiss-on-timeout="4000" ng-repeat="alert in alerts" ng-class="'alert-' + (alert.type || 'warning')" close="closeAlert($index)">{{alert.msg}}</div>
        </form>
      </div>
      <div class="column">
        <form ng-submit="fileUpload()">
          <label>upload .XLSX spreadsheet</label>
          <br><br>
          <label class="btn btn-default btn-file">
            Upload file
            <input onchange="$('#upload-file-info').html(this.files[0].name)" style="display: none;" type="file" ngf-select ng-model="spreadsheet" ngf-pattern="'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'" accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" ngf-max-size="20MB" />
          </label>
          <span class='label label-info' id="upload-file-info"></span>
          <br><br>
          <button type='sumbit' class="btn btn-primary">Submit</button>
        </form>
      </div>
    </div>

    <div>
      <table class="table">
        <thead>
          <tr>
            <th>Year</th>
            <th>Make</th>
            <th>Harness Type</th>
            <th>Edit</th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="vehicle in vehicles" ng-include="checkEdit(vehicle)">
          </tr>
          <script type="text/ng-template" id="display">
            <td>
              <label ng-bind="vehicle.year"></label>
            </td>
            <td>
              <label ng-bind="vehicle.make"></label>
            </td>
            <td>
              <label ng-bind="vehicle.harnessType"></label>
            </td>
            <td>
              <button type="button" class="btn btn-primary" ng-click="editVehicle(vehicle)">Edit</button>
              <button class="btn btn-danger" uib-popover-template="'deletePopover'">Delete</button>
            </td>
          </script>
          <script type="text/ng-template" id="edit">
            <td>
              <label ng-bind="vehicle.year"></label>
            </td>
            <td>
              <label ng-bind="vehicle.make"></label>
            </td>
            <td>
              <input type="number" ng-model='vehicle.harnessType' class="form-control input-sm" />
            </td>
            <td>
              <button type="button" class="btn btn-primary" ng-click="updateVehicle(vehicle)">Save</button>
              <button type="button" class="btn btn-danger" ng-click="reset()">Cancel</button>
            </td>
          </script>
          <script type="text/ng-template" id="deletePopover">
            <div>
              <div class="popover-arrow"></div>
              <h3 class="popover-title">Are you sure?</h3>
              <div class="popover-content">
                <button class="btn btn-danger" ng-click="deleteVehicle(vehicle)">Confirm</button>
                <button class="btn btn-primary" ng-click="reset()">Stooopp!</button>
              </div>
            </div>
          </script>
        </tbody>
      </table>
    </div>
  </div>


</body>

</html>
